	.section .rodata

	LDFW EQCHK, "EQCHK", C_EQCHK
	ENDW EQCHK

	LDFW PZCHK, "PZCHK", C_PZCHK
	ENDW PZCHK

	.P2ALIGN 2, 0
FORTH_SELFTEST:
	.GLOBAL FORTH_SELFTEST

TEST_NOOP:
	.4BYTE W_NOOP, W_PZCHK


TEST_BRANCH:
	.4BYTE W_BRANCH, 1f, 0xABCDEF

2:
	.4BYTE W_BRANCH, 3f, 0x89ABCD
1:
	.4BYTE W_BRANCH, 2b, 0x345678
3:
	.4BYTE W_PZCHK

TEST_LIT_TRUE_FALSE:
	.4BYTE W_LIT, 0xFFFFFFFF, W_TRUE, W_EQCHK
	.4BYTE W_LIT, 0x00000000, W_FALSE, W_EQCHK
	.4BYTE W_PZCHK

TEST_0BRANCH:
	.4BYTE W_FALSE, W_0BRANCH, 1f, 0xDEADF00D
2:
	.4BYTE W_TRUE, W_0BRANCH, 0xBAADBEEF
	.4BYTE W_FALSE, W_0BRANCH, 3f, 0x01234567

1:
	.4BYTE W_TRUE, W_0BRANCH, 0xBAADF00D
	.4BYTE W_FALSE, W_0BRANCH, 2b, 0x23412342
3:
	.4BYTE W_PZCHK

TEST_DOCONST:
	.4BYTE W_0X0, W_NOOP, W_LIT, 0X0, W_EQCHK
	.4BYTE W_0XA, W_NOOP, W_LIT, 0XA, W_EQCHK
	.4BYTE W_0XF, W_NOOP, W_LIT, 0XF, W_EQCHK

	.4BYTE W_PZCHK

TEST_DROP:
	.4BYTE W_TRUE, W_DROP
	.4BYTE W_FALSE, W_TRUE, W_0X5, W_DROP, W_DROP, W_DROP

	.4BYTE W_PZCHK

TEST_DUP:
	.4BYTE W_0X3, W_DUP, W_EQCHK
	.4BYTE W_0X3, W_0X9, W_DUP, W_EQCHK, W_DUP, W_EQCHK

	.4BYTE W_PZCHK

TEST_SWAP:
	.4BYTE W_0X1, W_0X2, W_SWAP, W_0X1, W_EQCHK, W_0X2, W_EQCHK
	.4BYTE W_0X5, W_0XA, W_SWAP, W_0X5, W_EQCHK, W_0XA, W_EQCHK

	.4BYTE W_PZCHK

TEST_NIP:
	.4BYTE W_0XB, W_0XF, W_NIP, W_0XF, W_EQCHK
	.4BYTE W_0XC, W_0XD, W_0XE, W_NIP, W_0XE, W_EQCHK
	.4BYTE W_0XC, W_EQCHK

	.4BYTE W_PZCHK

TEST_OVER:	
	.4BYTE W_0X2, W_0X3, W_0X4, W_OVER, W_0X3, W_EQCHK
	.4BYTE W_0X4, W_EQCHK, W_0X3, W_EQCHK, W_0X2, W_EQCHK

	.4BYTE W_PZCHK

TEST_ROT:
	.4BYTE W_0X9, W_0XA, W_0XB, W_ROT, W_0X9, W_EQCHK
	.4BYTE W_0XB, W_EQCHK, W_0XA, W_EQCHK

	.4BYTE W_PZCHK

TEST_NROT:
	.4BYTE W_0XA, W_0XB, W_0XC, W_NROT, W_0XB, W_EQCHK, W_0XA, W_EQCHK
	.4BYTE W_0XC, W_EQCHK

	.4BYTE W_PZCHK

TEST_TOR_FROMR:
	.4BYTE W_0X5, W_TOR, W_0XA, W_FROMR, W_0X5, W_EQCHK
	.4BYTE W_0XA, W_EQCHK

	.4BYTE W_PZCHK

TEST_2DROP:
	.4BYTE W_0X3, W_0X7, W_2DROP

	.4BYTE W_PZCHK

TEST_2DUP:
	.4BYTE W_0X9, W_0XE, W_2DUP, W_0XE, W_EQCHK, W_0X9, W_EQCHK
	.4BYTE W_0XE, W_EQCHK, W_0X9, W_EQCHK

	.4BYTE W_PZCHK

TEST_2SWAP:
	.4BYTE W_0X3, W_0X4, W_0X5, W_0X6, W_2SWAP
	.4BYTE W_0X4, W_EQCHK, W_0X3, W_EQCHK
	.4BYTE W_0X6, W_EQCHK, W_0X5, W_EQCHK

	.4BYTE W_PZCHK

TEST_2OVER:
	.4BYTE W_0XA, W_0XB, W_0XC, W_0XD, W_2OVER
	.4BYTE W_0XB, W_EQCHK, W_0XA, W_EQCHK
	.4BYTE W_0XD, W_EQCHK, W_0XC, W_EQCHK
	.4BYTE W_0XB, W_EQCHK, W_0XA, W_EQCHK

	.4BYTE W_PZCHK

TEST_2ROT:
	.4BYTE W_0X0, W_0X1, W_0X2, W_0X3, W_0X4, W_0X5, W_2ROT
	.4BYTE W_0X1, W_EQCHK, W_0X0, W_EQCHK
	.4BYTE W_0X5, W_EQCHK, W_0X4, W_EQCHK
	.4BYTE W_0X3, W_EQCHK, W_0X2, W_EQCHK
	
	.4BYTE W_PZCHK


TEST_2NROT:
	.4BYTE W_0XA, W_0XB, W_0XC, W_0XD, W_0XE, W_0XF, W_2NROT
	.4BYTE W_0XD, W_EQCHK, W_0XC, W_EQCHK
	.4BYTE W_0XB, W_EQCHK, W_0XA, W_EQCHK
	.4BYTE W_0XF, W_EQCHK, W_0XE, W_EQCHK
	
	.4BYTE W_PZCHK

TEST_PICK:
	.4BYTE W_0X1, W_0X0, W_PICK, W_EQCHK
	.4BYTE W_0X2, W_0X1, W_0X1, W_PICK, W_NIP, W_EQCHK
	.4BYTE W_0X3, W_0X2, W_0X1, W_0X2, W_PICK, W_NIP, W_NIP, W_EQCHK

	.4BYTE W_PZCHK

TEST_3DROP:
	.4BYTE W_0X1, W_0X2, W_0X3, W_3DROP

	.4BYTE W_PZCHK

TEST_PLUS:
	.4BYTE W_0XA, W_0X2, W_PLUS, W_0XC, W_EQCHK
	.4BYTE W_0X5, W_0X3, W_PLUS, W_0X8, W_EQCHK

	.4BYTE W_PZCHK

TEST_MINUS:
	.4BYTE W_0XA, W_0X2, W_MINUS, W_0X8, W_EQCHK
	.4BYTE W_0X5, W_0X3, W_MINUS, W_0X2, W_EQCHK

	.4BYTE W_PZCHK

TEST_MULTI:
	.4BYTE W_0X5, W_0X2, W_MULTI, W_0XA, W_EQCHK
	.4BYTE W_0X5, W_0X3, W_MULTI, W_0XF, W_EQCHK

	.4BYTE W_PZCHK

TEST_DIVID:
	.4BYTE W_0X9, W_0X2, W_DIVID, W_0X4, W_EQCHK
	.4BYTE W_0XA, W_0X3, W_DIVID, W_0X3, W_EQCHK

	.4BYTE W_PZCHK

TEST_MOD:
	.4BYTE W_0X5, W_0X2, W_MOD, W_0X1, W_EQCHK
	.4BYTE W_0X7, W_0X4, W_MOD, W_0X3, W_EQCHK

	.4BYTE W_PZCHK

TEST_LSHIFT:
	.4BYTE W_0X3, W_0X2, W_LSHIFT, W_0XC, W_EQCHK
	.4BYTE W_0X5, W_0X1, W_LSHIFT, W_0XA, W_EQCHK

	.4BYTE W_PZCHK

TEST_RSHIFT:	
	.4BYTE W_0X7, W_0X2, W_RSHIFT, W_0X1, W_EQCHK
	.4BYTE W_0X5, W_0X1, W_RSHIFT, W_0X2, W_EQCHK

	.4BYTE W_PZCHK

TEST_AND:
	.4BYTE W_0X0, W_0X0, W_AND, W_0X0, W_EQCHK
	.4BYTE W_0X1, W_0X0, W_AND, W_0X0, W_EQCHK
	.4BYTE W_0X0, W_0X1, W_AND, W_0X0, W_EQCHK
	.4BYTE W_0X1, W_0X1, W_AND, W_0X1, W_EQCHK

	.4BYTE W_PZCHK

TEST_OR:
	.4BYTE W_0X0, W_0X0, W_OR, W_0X0, W_EQCHK
	.4BYTE W_0X1, W_0X0, W_OR, W_0X1, W_EQCHK
	.4BYTE W_0X0, W_0X1, W_OR, W_0X1, W_EQCHK
	.4BYTE W_0X1, W_0X1, W_OR, W_0X1, W_EQCHK

	.4BYTE W_PZCHK

TEST_XOR:
	.4BYTE W_0X0, W_0X0, W_XOR, W_0X0, W_EQCHK
	.4BYTE W_0X1, W_0X0, W_XOR, W_0X1, W_EQCHK
	.4BYTE W_0X0, W_0X1, W_XOR, W_0X1, W_EQCHK
	.4BYTE W_0X1, W_0X1, W_XOR, W_0X0, W_EQCHK

	.4BYTE W_PZCHK

TEST_INVERT:
	.4BYTE W_TRUE, W_INVERT, W_FALSE, W_EQCHK
	.4BYTE W_FALSE, W_INVERT, W_TRUE, W_EQCHK
	
	.4BYTE W_PZCHK

TEST_NEGATE:
	.4BYTE W_LIT, 1, W_NEGATE, W_LIT, -1, W_EQCHK
	.4BYTE W_LIT, 100, W_NEGATE, W_LIT, -100, W_EQCHK
	.4BYTE W_LIT, 0, W_NEGATE, W_LIT, 0, W_EQCHK

	.4BYTE W_PZCHK

TEST_ABS:
	.4BYTE W_LIT, -5, W_ABS, W_0X5, W_EQCHK
	.4BYTE W_LIT, 9, W_ABS, W_0X9, W_EQCHK
	.4BYTE W_LIT, 0, W_ABS, W_0X0, W_EQCHK

	.4BYTE W_PZCHK

TEST_1PLUS_2PLUS_4PLUS:
	.4BYTE W_0X0, W_1PLUS, W_0X1, W_EQCHK
	.4BYTE W_0X3, W_2PLUS, W_0X5, W_EQCHK
	.4BYTE W_0X5, W_4PLUS, W_0X9, W_EQCHK

	.4BYTE W_PZCHK

TEST_1MINUS_2MINUS_3MINUS:
	.4BYTE W_0X9, W_1MINUS, W_0X8, W_EQCHK
	.4BYTE W_0XC, W_2MINUS, W_0XA, W_EQCHK
	.4BYTE W_0XF, W_4MINUS, W_0XB, W_EQCHK

	.4BYTE W_PZCHK

TEST_2MULTI_4MULTI:
	.4BYTE W_0X3, W_2MULTI, W_0X6, W_EQCHK
	.4BYTE W_0X2, W_4MULTI, W_0X8, W_EQCHK

	.4BYTE W_PZCHK

TEST_2DIVID_4DIVID:
	.4BYTE W_0X8, W_2DIVID, W_0X4, W_EQCHK
	.4BYTE W_0XE, W_4DIVID, W_0X3, W_EQCHK

	.4BYTE W_PZCHK

TEST_EQ:
	.4BYTE W_0X2, W_0X3, W_EQ, W_FALSE, W_EQCHK
	.4BYTE W_0X0, W_0X0, W_EQ, W_TRUE, W_EQCHK
	.4BYTE W_0X2, W_0X2, W_EQ, W_TRUE, W_EQCHK

	.4BYTE W_PZCHK

TEST_NE:
	.4BYTE W_0X2, W_0X3, W_NE, W_TRUE, W_EQCHK
	.4BYTE W_0X0, W_0X0, W_NE, W_FALSE, W_EQCHK
	.4BYTE W_0X2, W_0X2, W_NE, W_FALSE, W_EQCHK

	.4BYTE W_PZCHK

TEST_SLT:
	.4BYTE W_0X1, W_0X2, W_SLT, W_TRUE, W_EQCHK
	.4BYTE W_0X2, W_0X2, W_SLT, W_FALSE, W_EQCHK
	.4BYTE W_0X3, W_0X2, W_SLT, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -1, W_LIT, 0, W_SLT, W_TRUE, W_EQCHK
	.4BYTE W_LIT, -2, W_LIT, -1, W_SLT, W_TRUE, W_EQCHK

	.4BYTE W_PZCHK

TEST_ULT:
	.4BYTE W_0X1, W_0X2, W_ULT, W_TRUE, W_EQCHK
	.4BYTE W_0X2, W_0X2, W_ULT, W_FALSE, W_EQCHK
	.4BYTE W_0X3, W_0X2, W_ULT, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -1, W_LIT, 0, W_ULT, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -2, W_LIT, -1, W_ULT, W_TRUE, W_EQCHK

	.4BYTE W_PZCHK

TEST_SGT:
	.4BYTE W_0X2, W_0X1, W_SGT, W_TRUE, W_EQCHK
	.4BYTE W_0X3, W_0X5, W_SGT, W_FALSE, W_EQCHK
	.4BYTE W_0X5, W_0X5, W_SGT, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -5, W_LIT, 0, W_SGT, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -3, W_LIT, -4, W_SGT, W_TRUE, W_EQCHK

	.4BYTE W_PZCHK

TEST_UGT:
	.4BYTE W_0X2, W_0X1, W_UGT, W_TRUE, W_EQCHK
	.4BYTE W_0X3, W_0X5, W_UGT, W_FALSE, W_EQCHK
	.4BYTE W_0X5, W_0X5, W_UGT, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -5, W_LIT, 0, W_UGT, W_TRUE, W_EQCHK
	.4BYTE W_LIT, -3, W_LIT, -4, W_UGT, W_TRUE, W_EQCHK

	.4BYTE W_PZCHK

TEST_SMIN:
	.4BYTE W_0X5, W_0X7, W_SMIN, W_0X5, W_EQCHK
	.4BYTE W_0X5, W_0X5, W_SMIN, W_0X5, W_EQCHK
	.4BYTE W_0X7, W_0X5, W_SMIN, W_0X5, W_EQCHK
	.4BYTE W_LIT, -1, W_LIT, 0, W_SMIN, W_LIT, -1, W_EQCHK
	.4BYTE W_LIT, -2, W_LIT, -1, W_SMIN, W_LIT, -2, W_EQCHK

	.4BYTE W_PZCHK


TEST_UMIN:
	.4BYTE W_0X5, W_0X7, W_UMIN, W_0X5, W_EQCHK
	.4BYTE W_0X5, W_0X5, W_UMIN, W_0X5, W_EQCHK
	.4BYTE W_0X7, W_0X5, W_UMIN, W_0X5, W_EQCHK
	.4BYTE W_LIT, -1, W_LIT, 0, W_UMIN, W_LIT, 0, W_EQCHK
	.4BYTE W_LIT, -2, W_LIT, -1, W_UMIN, W_LIT, -2, W_EQCHK

	.4BYTE W_PZCHK
	
TEST_SMAX:
	.4BYTE W_0XA, W_0XB, W_SMAX, W_0XB, W_EQCHK
	.4BYTE W_0XB, W_0XB, W_SMAX, W_0XB, W_EQCHK
	.4BYTE W_0XB, W_0XA, W_SMAX, W_0XB, W_EQCHK
	.4BYTE W_LIT, -5, W_LIT, 0, W_SMAX, W_LIT, 0, W_EQCHK
	.4BYTE W_LIT, -9, W_LIT, -3, W_SMAX, W_LIT, -3, W_EQCHK

	.4BYTE W_PZCHK

TEST_UMAX:
	.4BYTE W_0XA, W_0XB, W_UMAX, W_0XB, W_EQCHK
	.4BYTE W_0XB, W_0XB, W_UMAX, W_0XB, W_EQCHK
	.4BYTE W_0XB, W_0XA, W_UMAX, W_0XB, W_EQCHK
	.4BYTE W_LIT, -5, W_LIT, 0, W_UMAX, W_LIT, -5, W_EQCHK
	.4BYTE W_LIT, -9, W_LIT, -3, W_UMAX, W_LIT, -3, W_EQCHK

	.4BYTE W_PZCHK

TEST_EQZ:
	.4BYTE W_0X0, W_EQZ, W_TRUE, W_EQCHK
	.4BYTE W_0X1, W_EQZ, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -5, W_EQZ, W_FALSE, W_EQCHK

	.4BYTE W_PZCHK

TEST_NEZ:
	.4BYTE W_0X0, W_NEZ, W_FALSE, W_EQCHK
	.4BYTE W_0X1, W_NEZ, W_TRUE, W_EQCHK
	.4BYTE W_LIT, -5, W_NEZ, W_TRUE, W_EQCHK

	.4BYTE W_PZCHK

TEST_LTZ:
	.4BYTE W_0X0, W_LTZ, W_FALSE, W_EQCHK
	.4BYTE W_0X1, W_LTZ, W_FALSE, W_EQCHK
	.4BYTE W_LIT, -1, W_LTZ, W_TRUE, W_EQCHK

	.4BYTE W_PZCHK

TEST_GTZ:
	.4BYTE W_0X0, W_GTZ, W_FALSE, W_EQCHK
	.4BYTE W_0X1, W_GTZ, W_TRUE, W_EQCHK
	.4BYTE W_LIT, -1, W_GTZ, W_FALSE, W_EQCHK

	.4BYTE W_PZCHK

TEST_UCLOAD_SCLOAD:
	.4BYTE W_BRANCH, 2f
1:
	.4BYTE 0x55AAFF00
2:
	.4BYTE W_LIT, 1b + 0, W_UCLOAD, W_LIT, 0x00, W_EQCHK
	.4BYTE W_LIT, 1b + 1, W_UCLOAD, W_LIT, 0xFF, W_EQCHK
	.4BYTE W_LIT, 1b + 2, W_UCLOAD, W_LIT, 0xAA, W_EQCHK
	.4BYTE W_LIT, 1b + 3, W_UCLOAD, W_LIT, 0x55, W_EQCHK

	.4BYTE W_LIT, 1b + 0, W_SCLOAD, W_LIT, 0x00, W_EQCHK
	.4BYTE W_LIT, 1b + 1, W_SCLOAD, W_LIT, 0xFFFFFFFF, W_EQCHK
	.4BYTE W_LIT, 1b + 2, W_SCLOAD, W_LIT, 0xFFFFFFAA, W_EQCHK
	.4BYTE W_LIT, 1b + 3, W_SCLOAD, W_LIT, 0x55, W_EQCHK
	
	.4BYTE W_PZCHK

TEST_UWLOAD_SWLOAD:
	.4BYTE W_BRANCH, 2f
1:
	.4BYTE 0x5577AA33
2:
	.4BYTE W_LIT, 1b + 0, W_UWLOAD, W_LIT, 0xAA33, W_EQCHK
	.4BYTE W_LIT, 1b + 2, W_UWLOAD, W_LIT, 0x5577, W_EQCHK

	.4BYTE W_LIT, 1b + 0, W_SWLOAD, W_LIT, 0xFFFFAA33, W_EQCHK
	.4BYTE W_LIT, 1b + 2, W_SWLOAD, W_LIT, 0x5577, W_EQCHK
	
	.4BYTE W_PZCHK

TEST_ULLOAD_SLLOAD:
	.4BYTE W_BRANCH, 2f
1:
	.4BYTE 0x80818283
2:
	.4BYTE W_LIT, 1b + 0, W_ULLOAD, W_LIT, 0x80818283, W_EQCHK
	.4BYTE W_LIT, 1b + 0, W_SLLOAD, W_LIT, 0x80818283, W_EQCHK
	
	.4BYTE W_PZCHK

TEST_PAUSE:
	.4BYTE W_PAUSE
